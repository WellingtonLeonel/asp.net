@page
@model MaisUmTesteWebApplication4.Pages.Usuarios.CadastrarModel
@{
    ViewData["Title"] = "Cadastrar";
}

<h2>Cadastrar</h2>

<form onsubmit="return valida()">

    <div class="form-group">

        <label for="usuario.Nome">Nome</label>
        <input type="text" name="Nome" value="@Model.usuario.Nome" class="form-control" placeholder="Nome" /><br />

        <label for="usuario.Senha">Senha</label>
        <input type="password" id="Senha" class="form-control" placeholder="Senha" /><br />

        <label>Confirmação de Senha</label>
        <input type="password" id="ConfirmacaoSenha" class="form-control" placeholder="Confirmação de Senha" /><br />

        <label for="usuario.Email">Email</label>
        <input type="text" name="Email" value="@Model.usuario.Email" class="form-control" placeholder="Email" /><br />

        <label for="usuario.CPF">CPF</label>
        <input type="text" name="CPF" value="@Model.usuario.CPF" class="form-control" placeholder="CPF" /><br />

        <label for="usuario.Data de Nascimento">Data de Nascimento</label>
        <input type="date" name="Data Nascimento" class="form-control" placeholder="Data de Nascimento" /><br />

        <hr />

        <label>CEP</label>
        <input type="text" name="CEP" id="CEP" class="form-control" placeholder="CEP" />
        <button class="btn" type="button" onclick="buscaEndereco()"
                aria-expanded="false" aria-controls="collapseExample">
            Buscar
        </button>
        <div class="collapse" id="collapseExemple">
            <div class="card card-body" id="ender">

                texto qualquer
            </div>

        </div>
        <div class="collapse" id="collapseForm">
          <label>Endereço</label>
            <input type="text" name="logradouro" id="logradouro"/>
          
            </div>

        </div>
        <button class="btn btn-primary">Enviar</button>
    </div>
</form>

<script>
    function buscaEndereco() {
        let cep = document.querySelector("#CEP");
        $.getJSON("https://viacep.com.br/ws/01001000/json/" + CEP.VALUE + "/json/",
            function (resp) {
                if (resp.erro) {
                    // cep não encontrado
                    document.querySelector("#ender").innerHTML = "cep não encontrado";
                    $('#collapseExample').collapse('show');
                    $('#collapseExample').collapse('hide');
                } else {
                    // preencha os campos de endereço
                    document.querySelector("#logradouro").value=resp.logradouro;
                    $('#collapseExample').collapse('hide');
                    $('#collapseExample').collapse('show');
                }
               
            });
         
    }
    function valida() {
    
    let Senha = document.getElementById("Senha");
    let ConfirmacaoSenha = document.getElementById("ConfirmacaoSenha");

   
   if (Senha.value.length <4){
   alert("A senha deve ter pelo menos 4 caracteres");
       return false;                 
   }
 
   if (Senha.value != ConfirmacaoSenha.value){
       alert("As senhas devem ser iguais");
       return false;                     
    }
    return true;
    }
</script> 